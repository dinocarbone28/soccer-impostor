<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Soccer Impostor ‚Äî Multiplayer</title>

  <!-- SEO/Social kept minimal for brevity; keep yours if you prefer -->
  <meta name="theme-color" content="#0b1220">
  <link rel="icon" href="/favicon.ico">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css?v=2.1.0">
  <style>
    /* --- SPA menu styling & transitions (adds on top of your stylesheet) --- */
    .screen { display:none; opacity:0; transform:translateY(12px);
      transition:opacity .35s ease, transform .35s ease; }
    .screen.active { display:block; opacity:1; transform:none; }

    .menu-hero {
      display:grid; gap:18px; grid-template-columns:repeat(3,minmax(0,1fr));
    }
    .tile {
      position:relative; overflow:hidden; border-radius:22px;
      background:linear-gradient(180deg,#0d1a12,#102518);
      border:1px solid #1d5a37; box-shadow:var(--shadow);
      cursor:pointer; isolation:isolate; min-height:200px;
      transition:transform .15s ease, box-shadow .2s ease, filter .2s ease;
    }
    .tile:hover { transform:translateY(-3px); box-shadow:0 24px 60px rgba(0,0,0,.35); filter:brightness(1.05) }
    .tile h3 {
      position:absolute; left:16px; bottom:16px; margin:0; z-index:2;
      font-family:var(--font-display); font-size:28px; letter-spacing:.6px;
      text-shadow:0 3px 18px rgba(0,0,0,.45);
    }
    .tile .sub { position:absolute; left:16px; bottom:48px; z-index:2; color:var(--ink-500) }
    .tile img {
      position:absolute; right:-10px; bottom:-4px; height:120%;
      opacity:.9; filter:drop-shadow(0 14px 28px rgba(0,0,0,.45));
      pointer-events:none; transform:scale(1.03);
    }
    .menu-bar { display:flex; gap:10px; align-items:center; margin-bottom:14px }
    .menu-bar .brand { font-size:36px }

    /* inner screens layout */
    .stack { display:grid; gap:18px }
    .backrow { display:flex; gap:10px; align-items:center; }
    .backrow .btn { padding:10px 14px }

    /* subtle header stripe */
    .stripe { height:3px; background:linear-gradient(90deg,var(--line-100),transparent); opacity:.4; border-radius:999px; margin:8px 0 2px }
    @media (max-width: 960px){ .menu-hero{ grid-template-columns:1fr } }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">‚öΩ Soccer Impostor</div>
    <div class="room" id="roomCode"></div>
    <div class="game-tagline"><p>üéÆ Slick FIFA-style menus. Create, join, or match globally.</p></div>
  </header>

  <main class="container">

    <!-- ======================= MAIN MENU ======================= -->
    <section id="screen-menu" class="screen active">
      <div class="menu-bar">
        <h2>Play</h2>
      </div>
      <div class="menu-hero">
        <!-- Create Lobby -->
        <article class="tile" data-nav="screen-create" style="background:
            linear-gradient(180deg, #0e1f15, #0f2619);">
          <img src="/img/create-forward.png" alt="Forward" loading="eager">
          <div class="sub">Host a room with your rules</div>
          <h3>Create Lobby</h3>
        </article>

        <!-- Join by Code -->
        <article class="tile" data-nav="screen-join" style="background:
            linear-gradient(180deg, #0e1c2a, #0f2230); border-color:#1f4366;">
          <img src="/img/join-midfielder.png" alt="Midfielder" loading="eager">
          <div class="sub">Have a 5-letter code? Jump in</div>
          <h3>Join by Code</h3>
        </article>

        <!-- Global Matchmaking -->
        <article class="tile" data-nav="screen-global" style="background:
            linear-gradient(180deg, #18130d, #1e190f); border-color:#705517;">
          <img src="/img/match-keeper.png" alt="Goalkeeper" loading="eager">
          <div class="sub">Browse public lobbies worldwide</div>
          <h3>Global Matchmaking</h3>
        </article>
      </div>
    </section>

    <!-- ======================= CREATE LOBBY ======================= -->
    <section id="screen-create" class="screen">
      <div class="backrow">
        <button class="btn" data-nav="screen-menu">‚Üê Back</button>
        <h2>Create Lobby (Host)</h2>
      </div>
      <div class="stripe"></div>
      <div class="stack">
        <div class="panel">
          <div class="row"><input id="hostName" class="input" placeholder="Your name"></div>
          <div class="row two">
            <div><label># of Impostors</label><input id="hostImpostors" class="input" type="number" min="1" value="1"></div>
            <div><label>Hint Timer (sec)</label><input id="hostHintSec" class="input" type="number" min="5" value="30"></div>
          </div>
          <div class="row two">
            <div><label>Public Lobby</label><br><input id="hostPublic" type="checkbox" checked></div>
            <div><label>Region</label>
              <select id="hostRegion" class="input">
                <option>GLOBAL</option><option>NA</option><option>SA</option>
                <option>EU</option><option>AF</option><option>AS</option><option>OC</option>
              </select>
            </div>
          </div>
          <div class="row two">
            <div><label>Max Players (3‚Äì10)</label><input id="hostMaxPlayers" class="input" type="number" min="3" max="10" value="10"></div>
            <div></div>
          </div>
          <button id="createBtn" class="btn primary">Create Room</button>
        </div>
      </div>
    </section>

    <!-- ======================= JOIN BY CODE ======================= -->
    <section id="screen-join" class="screen">
      <div class="backrow">
        <button class="btn" data-nav="screen-menu">‚Üê Back</button>
        <h2>Join by Code</h2>
      </div>
      <div class="stripe"></div>
      <div class="panel">
        <input id="joinName" class="input" placeholder="Your name">
        <input id="joinCode" class="input" placeholder="ABCDE" maxlength="5">
        <button id="joinBtn" class="btn">Join</button>
      </div>
    </section>

    <!-- ======================= GLOBAL MATCHMAKING ======================= -->
    <section id="screen-global" class="screen">
      <div class="backrow">
        <button class="btn" data-nav="screen-menu">‚Üê Back</button>
        <h2>Global Matchmaking</h2>
      </div>
      <div class="stripe"></div>

      <!-- filters + name (NEW: dedicated name input) -->
      <div class="panel">
        <div class="row wrap" style="gap:.5rem;margin:.25rem 0 .75rem">
          <input id="matchName" class="input" placeholder="Your matchmaking name (shown to others)" style="max-width:280px">
          <button id="lobbyRefreshBtn" class="btn">Refresh</button>
          <select id="lobbyRegionFilter" class="input" style="max-width:180px">
            <option value="">All Regions</option>
            <option>GLOBAL</option><option>NA</option><option>SA</option>
            <option>EU</option><option>AF</option><option>AS</option><option>OC</option>
          </select>
          <label class="small muted"><input id="lobbyOnlyOpen" type="checkbox" style="margin-right:.4rem">Only open lobbies</label>
          <label class="muted small">Auto-updates when new rooms appear.</label>
        </div>
        <ul id="lobbyList" class="list"></ul>
      </div>
    </section>

    <!-- ======================= EXISTING GAME SCREENS (unchanged) ======================= -->
    <section id="lobby" class="view">
      <div class="panel">
        <h2>Lobby</h2>
        <p class="muted">Share the room code with friends.</p>
        <ul id="playerList" class="list"></ul>
      </div>
      <div class="panel">
        <div class="row"><label class="small"><input id="readyToggle" type="checkbox" style="margin-right:.5rem">I‚Äôm Ready</label></div>
      </div>
      <div id="hostControls" class="panel hidden">
        <h3>Host Controls</h3>
        <div class="row wrap">
          <button id="startGameBtn" class="btn primary">Start Game</button>
          <button id="forceRestartBtn" class="btn danger">Play Again (Randomize)</button>
          <button id="forceNextBtn" class="btn">Force Next Turn</button>
          <button id="mainMenuBtn" class="btn">Main Menu</button>
        </div>
        <div class="row wrap" style="margin-top:.5rem">
          <button id="updateSettingsBtn" class="btn">Update Settings (Host)</button>
        </div>
      </div>
    </section>

    <section id="hint" class="view">
      <div class="panel">
        <div class="role" id="roleBanner"></div>
        <div class="secretBox hidden" id="secretBox">Your player: <strong id="secretName"></strong></div>
        <div class="turnBox"><span>Turn:</span><strong id="turnName" class="pulse">‚Äî</strong><span id="turnTimer" class="timer"></span></div>
        <div id="hintInputRow" class="row"><input id="hintInput" class="input" placeholder="Your hint (keep it subtle!)"/><button id="submitHintBtn" class="btn">Submit Hint</button></div>
        <h3>Hints</h3>
        <ul id="hintList" class="list"></ul>
      </div>
    </section>

    <section id="vote" class="view">
      <div class="panel">
        <h2>Vote the Impostor</h2>
        <div class="row space-between" style="align-items:center;margin-bottom:.75rem">
          <div class="muted small">Voting ends in <strong id="voteCountdown">‚Äî</strong></div>
          <div class="muted small">Round Hints &nbsp;‚Üì</div>
        </div>
        <div id="voteChat" class="subpanel" style="margin-top:.75rem">
          <h3>Chat</h3>
          <div id="chatLog" class="chatLog"></div>
          <div class="row" style="gap:.5rem;margin-top:.5rem">
            <input id="chatInput" class="input" placeholder="Type a message‚Ä¶" maxlength="200">
            <button id="chatSendBtn" class="btn">Send</button>
          </div>
        </div>
        <div class="subpanel"><h3>Round Hints</h3><ul id="voteHints" class="list"></ul></div>
        <div id="voteList" class="voteList"></div>
        <label class="voteCard"><span>Skip Vote (no elimination)</span><input type="radio" name="voteTarget" value="SKIP"></label>
        <button id="submitVoteBtn" class="btn primary">Submit Vote</button>
        <p class="muted small" id="voteStatus"></p>
      </div>
    </section>

    <section id="over" class="view">
      <div class="panel">
        <h2 id="overTitle">Game Over</h2>
        <p id="overDetails"></p>
        <button id="playAgainBtn" class="btn primary">Play Again (Host)</button>
      </div>
    </section>

  </main>

  <footer class="muted small" style="text-align:center; margin:32px 0; opacity:.85">
    <a href="/privacy.html">Privacy</a> ¬∑
    <a href="/contact.html">Contact</a> ¬∑
    <a href="/">Home</a>
  </footer>

  <!-- Scripts -->
  <script src="/socket.io/socket.io.js" defer></script>
  <script src="client.js?v=1.6.1" defer></script>

  <!-- Tiny SPA nav (visual only; does not touch game logic) -->
  <script>
    (function(){
      const screens = ["screen-menu","screen-create","screen-join","screen-global"];
      function activate(id){
        screens.forEach(s => {
          const el = document.getElementById(s);
          if (!el) return;
          el.classList.toggle("active", s===id);
        });
      }
      document.addEventListener("click", (e)=>{
        const trg = e.target.closest("[data-nav]");
        if (trg) { activate(trg.getAttribute("data-nav")); }
      });
      // If a room code appears (host created / joined), we‚Äôll hide menu screens the old way
      // via your existing client.js show('lobby'|'hint'|'vote'|'over').
    })();
  </script>
</body>
</html>
