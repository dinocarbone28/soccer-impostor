<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Soccer Impostor — Multiplayer</title>

  <meta name="theme-color" content="#ffffff">
  <link rel="icon" href="/favicon.ico">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Your base CSS (unchanged) -->
  <link rel="stylesheet" href="styles.css?v=2.1.0">

  <!-- FIFA-style light theme overrides (visual only) -->
  <style>
    :root{
      --bg: #ffffff;
      --ink: #0c1326;
      --ink-500:#58627c;
      --brand:#2d6cdf;            /* primary blue accent */
      --brand-2:#15a05c;          /* secondary green accent */
      --line:#e7ebf3;
      --panel:#ffffff;
      --shadow: 0 10px 30px rgba(14,22,40,.10);
      --font-display: "Bebas Neue", system-ui, sans-serif;
      --font-ui: "Rajdhani", system-ui, sans-serif;
    }
    html,body{background:var(--bg); color:var(--ink); font-family:var(--font-ui);}

    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px; padding:14px 20px; border-bottom:1px solid var(--line);
      background:linear-gradient(180deg,#fff, #f9fbff);
    }
    .brand{font-family:var(--font-display); font-size:32px; letter-spacing:.5px}
    .game-tagline p{margin:0; color:var(--ink-500)}

    .container{max-width:1100px; margin:24px auto; padding:0 16px}

    .screen{display:none; opacity:0; transform:translateY(10px);
      transition:opacity .28s ease, transform .28s ease}
    .screen.active{display:block; opacity:1; transform:none}

    .menu-hero{display:grid; gap:18px; grid-template-columns:repeat(3,minmax(0,1fr))}
    .tile{
      position:relative; min-height:220px; border-radius:18px; overflow:hidden;
      background:linear-gradient(180deg,#f3f6ff,#fff);
      border:1px solid var(--line); box-shadow:var(--shadow); cursor:pointer;
      transition:transform .15s ease, box-shadow .2s ease, filter .2s ease;
    }
    .tile:hover{ transform:translateY(-3px); box-shadow:0 18px 50px rgba(14,22,40,.18)}
    .tile h3{
      position:absolute; left:16px; bottom:16px; margin:0;
      font-family:var(--font-display); font-size:30px; letter-spacing:.6px;
    }
    .tile .sub{ position:absolute; left:16px; bottom:52px; color:var(--ink-500) }
    .tile img{ position:absolute; right:-6px; bottom:-4px; height:120%; opacity:.9; pointer-events:none}

    .panel{
      background:var(--panel); border:1px solid var(--line); border-radius:16px;
      box-shadow:var(--shadow); padding:16px 16px;
    }
    .subpanel{ background:#fbfcff; border:1px dashed #d9e2f0; border-radius:12px; padding:12px; margin-top:.5rem}
    .row{display:flex; gap:10px}
    .row.wrap{flex-wrap:wrap}
    .row.two > *{flex:1}
    .space-between{justify-content:space-between}
    .small{font-size:.9rem}
    .muted{color:var(--ink-500)}

    .input{ width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:white }
    .btn{
      appearance:none; border:1px solid var(--line); background:#f5f8ff;
      padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600;
    }
    .btn:hover{filter:brightness(1.02)}
    .btn.primary{ background:var(--brand); color:#fff; border-color:#1f58c1}
    .btn.danger{ background:#ff5b6a; color:#fff; border-color:#e34a59}
    .btn.small{padding:6px 10px; border-radius:10px}

    .voteCard{
      display:flex; align-items:center; justify-content:space-between;
      border:1px solid var(--line); background:#fff; border-radius:12px;
      padding:10px 12px; margin:6px 0;
    }
    .chatLog{ max-height:220px; overflow:auto; background:#fff; border:1px solid var(--line); border-radius:10px; padding:8px}
    .line .name{font-weight:700}

    .stripe{height:3px; background:linear-gradient(90deg,#a2b7f7,transparent); opacity:.5; border-radius:999px; margin:8px 0 2px}

    @media (max-width: 960px){ .menu-hero{grid-template-columns:1fr} }
    /* Ensure host start button visually disabled state is clear */
    #startGameBtn:disabled{opacity:.55; cursor:not-allowed}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">⚽ Soccer Impostor</div>
    <div class="room" id="roomCode"></div>
    <div class="game-tagline"><p>Create, join or match globally — smooth FIFA-style menus.</p></div>
  </header>

  <main class="container">

    <!-- ======================= MAIN MENU ======================= -->
    <section id="screen-menu" class="screen active">
      <div class="menu-hero">
        <!-- Create Lobby -->
        <article class="tile" data-nav="screen-create">
          <img src="/img/create-forward.png" alt="Forward" loading="eager">
          <div class="sub">Host a room with your rules</div>
          <h3>Create Lobby</h3>
        </article>

        <!-- Join by Code -->
        <article class="tile" data-nav="screen-join">
          <img src="/img/join-midfielder.png" alt="Midfielder" loading="eager">
          <div class="sub">Have a 5-letter code? Jump in</div>
          <h3>Join by Code</h3>
        </article>

        <!-- Global Matchmaking -->
        <article class="tile" data-nav="screen-global">
          <img src="/img/match-keeper.png" alt="Goalkeeper" loading="eager">
          <div class="sub">Browse public lobbies worldwide</div>
          <h3>Global Matchmaking</h3>
        </article>
      </div>
    </section>

    <!-- ======================= CREATE LOBBY ======================= -->
    <section id="screen-create" class="screen">
      <div class="panel">
        <h2>Create Lobby (Host)</h2>
        <div class="stripe"></div>
        <div class="row"><input id="hostName" class="input" placeholder="Your name"></div>
        <div class="row two">
          <div><label># of Impostors</label><input id="hostImpostors" class="input" type="number" min="1" value="1"></div>
          <div><label>Hint Timer (sec)</label><input id="hostHintSec" class="input" type="number" min="5" value="30"></div>
        </div>
        <div class="row two">
          <div><label>Public Lobby</label><br><input id="hostPublic" type="checkbox" checked></div>
          <div><label>Region</label>
            <select id="hostRegion" class="input">
              <option>GLOBAL</option><option>NA</option><option>SA</option>
              <option>EU</option><option>AF</option><option>AS</option><option>OC</option>
            </select>
          </div>
        </div>
        <div class="row two">
          <div><label>Max Players (3–10)</label><input id="hostMaxPlayers" class="input" type="number" min="3" max="10" value="10"></div>
          <div></div>
        </div>
        <div class="row" style="gap:.5rem">
          <button class="btn" data-nav="screen-menu">Back</button>
          <button id="createBtn" class="btn primary">Create Room</button>
        </div>
      </div>
    </section>

    <!-- ======================= JOIN BY CODE ======================= -->
    <section id="screen-join" class="screen">
      <div class="panel">
        <h2>Join by Code</h2>
        <div class="stripe"></div>
        <input id="joinName" class="input" placeholder="Your name">
        <input id="joinCode" class="input" placeholder="ABCDE" maxlength="5">
        <div class="row" style="gap:.5rem">
          <button class="btn" data-nav="screen-menu">Back</button>
          <button id="joinBtn" class="btn primary">Join</button>
        </div>
      </div>
    </section>

    <!-- ======================= GLOBAL MATCHMAKING ======================= -->
    <section id="screen-global" class="screen">
      <div class="panel">
        <h2>Global Matchmaking</h2>
        <div class="stripe"></div>
        <div class="row wrap" style="gap:.5rem;margin:.25rem 0 .75rem">
          <input id="matchName" class="input" placeholder="Your matchmaking name (shown to others)" style="max-width:280px">
          <button id="lobbyRefreshBtn" class="btn">Refresh</button>
          <select id="lobbyRegionFilter" class="input" style="max-width:180px">
            <option value="">All Regions</option>
            <option>GLOBAL</option><option>NA</option><option>SA</option>
            <option>EU</option><option>AF</option><option>AS</option><option>OC</option>
          </select>
          <label class="small muted"><input id="lobbyOnlyOpen" type="checkbox" style="margin-right:.4rem">Only open lobbies</label>
          <label class="muted small">Updates live as rooms change.</label>
        </div>
        <ul id="lobbyList" class="list"></ul>
        <div class="row" style="margin-top:.5rem"><button class="btn" data-nav="screen-menu">Back</button></div>
      </div>
    </section>

    <!-- ======================= LOBBY + GAME SCREENS (logic unchanged) ======================= -->
    <section id="lobby" class="view">
      <div class="panel">
        <h2>Lobby</h2>
        <p class="muted">Share the room code with friends.</p>
        <ul id="playerList" class="list"></ul>
      </div>
      <div class="panel">
        <div class="row"><label class="small"><input id="readyToggle" type="checkbox" style="margin-right:.5rem">I’m Ready</label></div>
      </div>
      <div id="hostControls" class="panel hidden">
        <h3>Host Controls</h3>
        <div class="row wrap">
          <button id="startGameBtn" class="btn primary" disabled>Start Game</button>
          <button id="forceRestartBtn" class="btn danger">Play Again (Randomize)</button>
          <button id="forceNextBtn" class="btn">Force Next Turn</button>
          <button id="mainMenuBtn" class="btn">Main Menu</button>
        </div>
        <div class="row wrap" style="margin-top:.5rem">
          <button id="updateSettingsBtn" class="btn">Update Settings (Host)</button>
        </div>
      </div>
    </section>

    <section id="hint" class="view">
      <div class="panel">
        <div class="role" id="roleBanner"></div>
        <div class="secretBox hidden" id="secretBox">Your player: <strong id="secretName"></strong></div>
        <div class="turnBox"><span>Turn:</span><strong id="turnName" class="pulse">—</strong><span id="turnTimer" class="timer"></span></div>
        <div id="hintInputRow" class="row"><input id="hintInput" class="input" placeholder="Your hint (keep it subtle!)"/><button id="submitHintBtn" class="btn">Submit Hint</button></div>
        <h3>Hints</h3>
        <ul id="hintList" class="list"></ul>
      </div>
    </section>

    <section id="vote" class="view">
      <div class="panel">
        <h2>Vote the Impostor</h2>
        <div class="row space-between" style="align-items:center;margin-bottom:.75rem">
          <div class="muted small">Voting ends in <strong id="voteCountdown">—</strong></div>
          <div class="muted small">Round Hints &nbsp;↓</div>
        </div>
        <div id="voteChat" class="subpanel" style="margin-top:.75rem">
          <h3>Chat</h3>
          <div id="chatLog" class="chatLog"></div>
          <div class="row" style="gap:.5rem;margin-top:.5rem">
            <input id="chatInput" class="input" placeholder="Type a message…" maxlength="200">
            <button id="chatSendBtn" class="btn">Send</button>
          </div>
        </div>
        <div class="subpanel"><h3>Round Hints</h3><ul id="voteHints" class="list"></ul></div>
        <div id="voteList" class="voteList"></div>
        <label class="voteCard"><span>Skip Vote (no elimination)</span><input type="radio" name="voteTarget" value="SKIP"></label>
        <button id="submitVoteBtn" class="btn primary">Submit Vote</button>
        <p class="muted small" id="voteStatus"></p>
      </div>
    </section>

    <section id="over" class="view">
      <div class="panel">
        <h2 id="overTitle">Game Over</h2>
        <p id="overDetails"></p>
        <button id="playAgainBtn" class="btn primary">Play Again (Host)</button>
      </div>
    </section>

  </main>

  <footer class="muted small" style="text-align:center; margin:32px 0; opacity:.85">
    <a href="/privacy.html">Privacy</a> ·
    <a href="/contact.html">Contact</a> ·
    <a href="/">Home</a>
  </footer>

  <!-- Scripts -->
  <script src="/socket.io/socket.io.js" defer></script>
  <script src="client.js?v=1.6.2" defer></script>

  <!-- Tiny SPA nav for the menu tiles only (game screens still use client.js show()) -->
  <script>
    (function(){
      const screens = ["screen-menu","screen-create","screen-join","screen-global"];
      function activate(id){
        screens.forEach(s => {
          const el = document.getElementById(s);
          if (!el) return;
          el.classList.toggle("active", s===id);
        });
      }
      document.addEventListener("click", (e)=>{
        const trg = e.target.closest("[data-nav]");
        if (trg) { activate(trg.getAttribute("data-nav")); }
      });
    })();
  </script>
</body>
</html>
